<!DOCTYPE html><html lang="zh"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>AWS Educate · 万圣节恶魔的领地</title><meta name="robots" content="noindex"><meta name="description" content="AWS Educate - Cytrogen"><link rel="icon" href="../favicon.png"><link rel="stylesheet" href="../css/hermes.css"><link rel="search" type="application/opensearchdescription+xml" href="https://cytrogen.icu/atom.xml" title="万圣节恶魔的领地"><script src="https://kit.fontawesome.com/0011a09a95.js" crossorigin="anonymous"></script><script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script><!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="atom.xml" title="万圣节恶魔的领地" type="application/atom+xml">
</head><body><div class="wrap"><header><a class="logo-link" href="../index.html"><img src="../favicon.png" alt="logo"></a><nav class="site-nav"><div class="nav-main"><div class="nav-primary"><ul class="nav-list hidden-mobile"><li class="nav-item"><a class="nav-link" href="../index.html">首页</a></li></ul><div class="nav-tools"><div class="language-menu"><button class="language-toggle" type="button"><i class="fas fa-globe"></i><span>中文</span></button><div class="language-dropdown hidden"></div></div><button id="search-btn" type="button" aria-label="nav.search"><i class="fas fa-search"></i></button></div><div class="nav-controls"><div class="more-menu hidden-mobile"><button class="more-toggle" type="button"><span>更多</span><i class="fas fa-chevron-down"></i></button><div class="more-dropdown hidden"><ul class="dropdown-list"><li class="dropdown-item"><a class="nav-link" href="../archives">归档</a></li><li class="dropdown-item"><a class="nav-link" href="../categories">分类</a></li><li class="dropdown-item"><a class="nav-link" href="../tags">标签</a></li><li class="dropdown-item"><a class="nav-link" href="../about">关于</a></li><li class="dropdown-item"><a class="nav-link" href="../friends">友链</a></li><li class="dropdown-item"><a class="nav-link" href="../atom.xml">RSS订阅</a></li><li class="dropdown-item"><a class="dropdown-link" href="https://portfolio.cytrogen.icu" target="_blank" rel="noopener noreferrer">作品集<i class="fas fa-external-link-alt"></i></a></li><li class="dropdown-item"><a class="dropdown-link" href="https://github.com/cytrogen" target="_blank" rel="noopener noreferrer">GitHub<i class="fas fa-external-link-alt"></i></a></li></ul></div></div><button class="hamburger-menu hidden-desktop" type="button" aria-label="nav.menu"><i class="fas fa-bars"></i></button></div></div></div><div class="search-overlay hidden" id="search-popup"><button class="search-close" id="search-close" type="button" aria-label="search.close"><i class="fas fa-times"></i></button><div class="search-container"><div class="search-input-wrapper"><input class="search-input" id="local-search-input" type="text" placeholder="搜索..."></div><div class="search-result" id="local-search-result"></div></div></div><div class="mobile-menu-container"><div class="menu-header"><button class="menu-close" type="button" aria-label="关闭"><i class="fas fa-times"></i></button></div><div class="menu-content"><ul class="nav-list"><li class="nav-item"><a class="nav-link" href="../index.html">首页</a></li><li class="nav-item"><a class="nav-link" href="../archives">归档</a></li><li class="nav-item"><a class="nav-link" href="../categories">分类</a></li><li class="nav-item"><a class="nav-link" href="../tags">标签</a></li><li class="nav-item"><a class="nav-link" href="../about">关于</a></li><li class="nav-item"><a class="nav-link" href="../friends">友链</a></li><li class="nav-item"><a class="nav-link" href="../atom.xml">RSS订阅</a></li><li class="nav-item"><a class="nav-link" href="https://portfolio.cytrogen.icu" target="_blank" rel="noopener noreferrer">作品集<i class="fas fa-external-link-alt"></i></a></li><li class="nav-item"><a class="nav-link" href="https://github.com/cytrogen" target="_blank" rel="noopener noreferrer">GitHub<i class="fas fa-external-link-alt"></i></a></li></ul></div></div></nav></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">AWS Educate</h1><div class="post-info">10/18/2024</div><div class="post-content"><p>参加学校内的 AWS YouthTech Bootcamp 时学习到的内容，故记录下来。</p>
<span id="more"></span>
<div class="danger">
<p>以下所有内容皆在 Amazon Educate 中进行。</p>
</div>
<h1 id="storage"><a class="markdownIt-Anchor" href="#storage"></a> Storage</h1>
<h2 id="amazon-s3"><a class="markdownIt-Anchor" href="#amazon-s3"></a> Amazon S3</h2>
<blockquote>
<p>在本实验室中，您将使用刚刚学习的亚马逊简单存储服务 (Amazon S3) 的一些功能来创建静态网站。</p>
<p>静态网站可以包含 HTML 页面、图像、样式表以及呈现网站所需的所有文件。</p>
<p>静态网站不使用服务器端脚本或数据库。不过，它们可能包含在用户网络浏览器中运行的客户端脚本。</p>
<p>您可以通过上传内容在 Amazon S3 上托管静态网站，并使其可供用户阅读。</p>
<p>不需要服务器，您可以使用 Amazon S3 随时从网络上的任何地方存储和检索任意数量的数据。</p>
</blockquote>
<p>目标：</p>
<ul>
<li>在 Amazon S3 中创建一个存储桶。</li>
<li>配置存储桶以托管静态网站。</li>
<li>将内容上传到存储桶。</li>
<li>打开对存储桶对象的公共访问。</li>
<li>使用预指定 URL 安全地共享水桶对象。</li>
<li>使用水桶策略保护水桶。</li>
<li>更新网站。</li>
<li>在 Amazon S3 控制台中查看对象版本。</li>
</ul>
<h4 id="creating-a-bucket-in-amazon-s3"><a class="markdownIt-Anchor" href="#creating-a-bucket-in-amazon-s3"></a> Creating a bucket in Amazon S3</h4>
<ol>
<li>
<p>In the AWS Management Console, on the Services menu, choose S3.</p>
</li>
<li>
<p>Choose Create bucket.</p>
<p>An S3 bucket name is globally unique, and all AWS accounts share the namespace. After you create a bucket, no other AWS accounts in any AWS Regions can use the name of that bucket unless you delete the bucket.</p>
<p>For this lab, you use a bucket name that includes a random number, such as website-123.</p>
</li>
<li>
<p>For Bucket name, enter website-&lt;123&gt; and replace &lt;123&gt; with a random number.</p>
</li>
<li>
<p>Public access to buckets is blocked by default. Because the files in your static website will need to be accessible through the internet, you must permit public access.</p>
</li>
<li>
<p>For Object Ownership, choose ACLs enabled.</p>
</li>
<li>
<p>Choose Bucket owner preferred.</p>
</li>
<li>
<p>For Block Public Access settings for this bucket, clear the check box for Block all public access, and then select the box that states I acknowledge that the current settings might result in this bucket and the objects within becoming public.</p>
</li>
<li>
<p>For Bucket Versioning, choose Enable.</p>
<p>Note: Once you turn on (enable) bucket versioning, you can't turn it off.</p>
</li>
<li>
<p>For Tags, choose Add tag, and enter the following:</p>
<ul>
<li>Key: Department</li>
<li>Value: Marketing</li>
</ul>
<p>You can use tags to add additional information to a bucket, such as a project code, cost center, or owner.</p>
</li>
<li>
<p>Choose Create bucket.</p>
</li>
<li>
<p>In the Buckets section, choose the name of your new bucket.</p>
</li>
<li>
<p>Choose the  Properties tab.</p>
</li>
</ol>
<h4 id="configuring-a-static-website-on-amazon-s3"><a class="markdownIt-Anchor" href="#configuring-a-static-website-on-amazon-s3"></a> Configuring a static website on Amazon S3</h4>
<ol>
<li>
<p>Scroll to the Static website hosting panel.</p>
</li>
<li>
<p>Choose Edit.</p>
</li>
<li>
<p>Configure the following settings:</p>
<ul>
<li>Static web hosting: Choose Enable.</li>
<li>Hosting type: Choose Host a static website.</li>
<li>Index document: Enter index.html</li>
<li>Error document: Enter error.html</li>
</ul>
<p>Note: You must enter index.html and error.html even though they are already displayed.</p>
</li>
<li>
<p>Choose Save changes.</p>
</li>
<li>
<p>In the Static website hosting panel under Bucket website endpoint, choose the link.</p>
<p>You receive a 403 Forbidden message because you have not yet configured the bucket permissions. Keep this tab open in your web browser so that you can return to it later.</p>
<p>You have configured your bucket to host a static website.</p>
</li>
</ol>
<h4 id="uploading-content-to-your-bucket"><a class="markdownIt-Anchor" href="#uploading-content-to-your-bucket"></a> Uploading content to your bucket</h4>
<ol>
<li>
<p>Choose (right-click) each of the following links, and download the files to your computer:<br>
Ensure that each file keeps the same file name, including the extension.</p>
<ul>
<li>index.html</li>
<li>script.js</li>
<li>style.css</li>
</ul>
</li>
<li>
<p>Return to the Amazon S3 console, and choose the Objects tab.</p>
</li>
<li>
<p>Choose Upload</p>
</li>
<li>
<p>Choose Add files</p>
</li>
<li>
<p>Choose the three files that you downloaded.</p>
</li>
<li>
<p>Choose Upload</p>
</li>
<li>
<p>Your files are uploaded to the bucket.</p>
</li>
<li>
<p>Choose Close</p>
</li>
</ol>
<h4 id="turning-on-public-access-to-the-objects"><a class="markdownIt-Anchor" href="#turning-on-public-access-to-the-objects"></a> Turning on public access to the objects</h4>
<p>Objects that are stored in Amazon S3 are private by default. This setting helps keep your organization's data secure.</p>
<p>In this task, you make the uploaded objects publicly accessible so users can view your website.</p>
<ol>
<li>
<p>First, confirm that the objects are currently private.</p>
</li>
<li>
<p>Return to the browser tab that showed the 403 Forbidden message.</p>
</li>
<li>
<p>Refresh the webpage.<br>
If you accidentally closed this tab, go to the Properties tab, and in the Static website hosting panel, choose the Bucket website endpoint link again.</p>
</li>
</ol>
<p>You should still see a 403 Forbidden message. This response is expected! This message indicates that your static website is being hosted by Amazon S3 but that the content is private.</p>
<p>You can make Amazon S3 objects public through two different ways:</p>
<p>To make either a whole bucket public or a specific directory in a bucket public, use a bucket policy.<br>
To make individual objects in a bucket public, use an access control list (ACL).<br>
It is normally safer to make individual objects public because doing so avoids accidentally making other objects public. However, if you know that the entire bucket contains no sensitive information, you can use a bucket policy.</p>
<p>You now configure the individual objects to be publicly accessible.</p>
<p>Keep the website tab open, and return to the web browser tab with the Amazon S3 console.<br>
Choose  all three objects.<br>
In the Actions menu, choose Make public using ACL.<br>
A list of the three objects is displayed.</p>
<p>Choose Make public<br>
Your static website is now publicly accessible.</p>
<p>Choose Close<br>
Return to the web browser tab that has the 403 Forbidden message.<br>
Refresh  the webpage.<br>
You should now see the static website that is being hosted by Amazon S3.</p>
<p>Now you know how to share objects with everyone by making them public. However, there may be times when you need to share an individual object for a limited amount of time. In the next task, you learn how to temporarily share an object.</p>
<h4 id="securely-sharing-an-object-using-a-presigned-url"><a class="markdownIt-Anchor" href="#securely-sharing-an-object-using-a-presigned-url"></a> Securely sharing an object using a presigned URL</h4>
<p>When you need to temporarily and securely share an object with a person or group of people, you can create a presigned URL. When you create the URL, you must configure how long the URL will be valid. Then, you can share this URL with the users who should have access to the object.</p>
<p>As long as the presigned URL is valid, anyone who has it can get to the object. Avoid keeping the URL active longer than necessary, and only share the URL with people you trust.</p>
<p>Choose (right-click) the following link, and download the file to your computer:<br>
Ensure that the file keeps the same file name, including the extension.<br>
new-report.png<br>
Return to the Amazon S3 console, and choose the Objects tab.<br>
Choose Upload<br>
Choose Add files<br>
Choose the file that you downloaded.<br>
Choose Upload<br>
You have uploaded your file to the bucket.</p>
<p>Choose Close</p>
<p>Like when you first uploaded the website files, the new-report.png file is private by default. This time, instead of making the object public, you create a presigned URL to access the file.</p>
<p>In the Objects tab, choose  new-report.png.</p>
<p>From the Actions menu, select Share with a presigned URL</p>
<p>In the pop-up window, configure the Time interval until the presigned URL expires:</p>
<p>Choose Minutes<br>
For Number of minutes, enter 2<br>
Choose Create presigned URL</p>
<p>From the banner at the top of the page, choose Copy presigned URL.</p>
<p>Open a new browser tab, and paste the URL you copied into the address bar.</p>
<p>A report is displayed in the web browser.</p>
<p>If you wait 5 minutes and use the link again, you will find that the URL has expired and no longer works.</p>
<h4 id="using-a-bucket-policy-to-secure-your-bucket"><a class="markdownIt-Anchor" href="#using-a-bucket-policy-to-secure-your-bucket"></a> Using a bucket policy to secure your bucket</h4>
<p>You want to protect your website files and make sure that no one can delete them. To do this, you apply a bucket policy that denies delete privileges on your website files.</p>
<p>Return to the Amazon S3 console, and choose the Permissions tab.<br>
Under Bucket policy, choose Edit<br>
Copy the following policy text. In the Policy text editor, replace the existing policy text with this text:<br>
{<br>
&quot;Version&quot;: &quot;2012-10-17&quot;,<br>
&quot;Id&quot;: &quot;MyBucketPolicy&quot;,<br>
&quot;Statement&quot;: [<br>
{<br>
&quot;Sid&quot;: &quot;BucketPutDelete&quot;,<br>
&quot;Effect&quot;: &quot;Deny&quot;,<br>
&quot;Principal&quot;: &quot;*&quot;,<br>
&quot;Action&quot;: &quot;s3:DeleteObject&quot;,<br>
&quot;Resource&quot;: [<br>
&quot;arn:aws:s3:::<bucket-name>/index.html&quot;,<br>
&quot;arn:aws:s3:::<bucket-name>/script.js&quot;,<br>
&quot;arn:aws:s3:::<bucket-name>/style.css&quot;<br>
]<br>
}<br>
]<br>
}<br>
This policy prevents everyone from deleting the three files that make your website work.</bucket-name></bucket-name></bucket-name></p>
<p>Next, you update the text in the policy editor. In the following lines of code in the policy editor, replace the  placeholders with the name of your bucket.</p>
<p>&quot;arn:aws:s3:::<bucket-name>/index.html&quot;,<br>
&quot;arn:aws:s3:::<bucket-name>/script.js&quot;,<br>
&quot;arn:aws:s3:::<bucket-name>/style.css&quot;<br>
Your updated code should look similar to the following:</bucket-name></bucket-name></bucket-name></p>
<p>&quot;arn:aws:s3:::website-1234/index.html&quot;,<br>
&quot;arn:aws:s3:::website-1234/script.js&quot;,<br>
&quot;arn:aws:s3:::website-1234/style.css&quot;<br>
Note: Your bucket name will be different. Be sure to use the name of the bucket that you created.</p>
<p>Choose Save changes</p>
<p>Return to the  the Object tab</p>
<p>Select  index.html.</p>
<p>Choose Delete.</p>
<p>In the Delete objects panel, enter delete to confirm that you want to remove this file.</p>
<p>Choose Delete objects</p>
<p>Notice that the index.html file is listed in the Failed to delete pane.</p>
<p>This confirms that your policy is working and preventing the website's files from being deleted.</p>
<p>Choose Close to return to the Objects tab.</p>
<h4 id="updating-the-website"><a class="markdownIt-Anchor" href="#updating-the-website"></a> Updating the website</h4>
<p>Although you have configured a policy to prevent deletion of website files, you can still update the website by editing the HTML file and uploading it to the S3 bucket again.</p>
<p>Amazon S3 is an object storage service, so you must upload the whole file. This action replaces the existing object in your bucket. You cannot edit the contents of an object; instead, you must replace the whole object.</p>
<p>On your computer, load the index.html file into a text editor (for example, Notepad or TextEdit).<br>
Find the text Served from Amazon S3, and replace it with Created by <YOUR-NAME>and substitute your name for  (for example, Created by Jane).<br>
Save the file.<br>
Return to the Amazon S3 console, and upload the index.html file that you just edited.<br>
Choose  index.html, and in the Actions menu, choose the Make public using ACL option again.<br>
Choose Make public.<br>
Return to the web browser tab with the static website, and refresh  the page.<br>
Your name should now be on the page.</YOUR-NAME></p>
<p>Your static website is now accessible on the internet. Because it is hosted on Amazon S3, the website has high availability and can serve high volumes of traffic without using any servers.</p>
<h4 id="exploring-file-versions"><a class="markdownIt-Anchor" href="#exploring-file-versions"></a> Exploring file versions</h4>
<p>Bucket versioning is turned off by default. When versioning is turned off, changes to objects can't be undone. For example, if you upload a new version of a file, the old file is replaced with the new one. The original file is lost. If you delete a file, it is permanently deleted, and you can't get it back.</p>
<p>However, when versioning is turned on, changed and deleted versions of files are saved. Previous versions of objects are not presented by default, but you can access them using the console or programmatically. Because you are keeping earlier versions of objects, you can recover them if you need to.</p>
<p>It is important to remember that once you turn on version, you cannot turn it off. However, you can suspend versioning. For more information on bucket versioning, see the Amazon Simple Storage Service Users Guide.</p>
<p>Recall that when you created your bucket, you turned on versioning. In this task, you view the object versions available in your bucket.</p>
<p>Return to the Amazon S3 console, and choose the Objects tab.</p>
<p>Choose  Show versions to turn on bucket versioning.</p>
<p>Review the list of objects in the bucket.</p>
<p>Notice that each file has a Version ID. These IDs are automatically generated by Amazon S3 when versioning is turned on.<br>
You should also find two versions of the index.html file because you uploaded a new version of the file. The current version is the file that you uploaded when you updated your website.</p>
<!-- flag of hidden posts --></div></article></div></main><footer><div class="paginator"></div><div id="disqus_thread"></div><script>var disqus_shortname = 'hallowdem';
var disqus_identifier = 'posts/d730.html';
var disqus_title = 'AWS Educate';
var disqus_url = 'https://cytrogen.icu/posts/d730.html';
(function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script><div class="copyright"><p>© 2022 - 2025 <a href="https://cytrogen.icu">Cytrogen</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/claymcleod/hexo-theme-hermes" target="_blank">hexo-theme-hermes</a>. </p></div></footer></div><script>document.addEventListener('DOMContentLoaded', function() {
  const codeBlocks = document.querySelectorAll('figure.highlight');
  
  codeBlocks.forEach(block => {
    let caption = block.querySelector('figcaption');
    if (!caption) {
      caption = document.createElement('figcaption');
      block.insertBefore(caption, block.firstChild);
    }

    const info = document.createElement('div');
    info.className = 'info';
    
    const filename = caption.querySelector('span');
    if (filename) {
      filename.className = 'filename';
      info.appendChild(filename);
    }
    
    const lang = block.className.split(' ')[1];
    if (lang) {
      const langSpan = document.createElement('span');
      langSpan.className = 'lang-name';
      langSpan.textContent = lang;
      info.appendChild(langSpan);
    }

    const sourceLink = caption.querySelector('a');
    if (sourceLink) {
      sourceLink.className = 'source-link';
      info.appendChild(sourceLink);
    }

    const actions = document.createElement('div');
    actions.className = 'actions';

    const codeHeight = block.scrollHeight;
    const threshold = 300;

    if (codeHeight > threshold) {
      block.classList.add('folded');
      
      const toggleBtn = document.createElement('button');
      toggleBtn.textContent = '展开';
      toggleBtn.addEventListener('click', () => {
        block.classList.toggle('folded');
        toggleBtn.textContent = block.classList.contains('folded') ? '展开' : '折叠';
      });
      actions.appendChild(toggleBtn);
    }

    const copyBtn = document.createElement('button');
    copyBtn.textContent = '复制';
    copyBtn.addEventListener('click', async () => {
      const codeLines = block.querySelectorAll('.code .line');
      const code = Array.from(codeLines)
        .map(line => line.textContent)
        .join('\n')
        .replace(/\n\n/g, '\n');
      
      try {
        await navigator.clipboard.writeText(code);
        copyBtn.textContent = '已复制';
        copyBtn.classList.add('copied');
        
        setTimeout(() => {
          copyBtn.textContent = '复制';
          copyBtn.classList.remove('copied');
        }, 3000);
      } catch (err) {
        console.error('复制失败:', err);
        copyBtn.textContent = '复制失败';
        
        setTimeout(() => {
          copyBtn.textContent = '复制';
        }, 3000);
      }
    });
    actions.appendChild(copyBtn);

    caption.innerHTML = '';
    caption.appendChild(info);
    caption.appendChild(actions);

    const markedLines = block.getAttribute('data-marked-lines');
    if (markedLines) {
      const lines = markedLines.split(',');
      lines.forEach(range => {
        if (range.includes('-')) {
          const [start, end] = range.split('-').map(Number);
          for (let i = start; i <= end; i++) {
            const line = block.querySelector(`.line-${i}`);
            if (line) line.classList.add('marked');
          }
        } else {
          const line = block.querySelector(`.line-${range}`);
          if (line) line.classList.add('marked');
        }
      });
    }
  });
});</script><script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" id="MathJax-script"></script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-4PVPZXE0QQ"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4PVPZXE0QQ');</script><script src="../js/search.js"></script><script>document.addEventListener('DOMContentLoaded', function() {
    const searchBtn = document.getElementById('search-btn');
    const searchPopup = document.getElementById('search-popup');
    const searchInput = document.getElementById('local-search-input');
    const searchClose = document.getElementById('search-close');

    if (searchBtn && searchPopup && searchInput) {
        searchBtn.addEventListener('click', function(e) {
            e.stopPropagation();
            searchPopup.classList.remove('hidden');
            searchInput.focus();
        });

        searchPopup.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        if (searchClose) {
            searchClose.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                searchPopup.classList.add('hidden');
            });
        }

        document.addEventListener('click', function() {
            searchPopup.classList.add('hidden');
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                searchPopup.classList.add('hidden');
            }
        });

        let search_path = "search.xml";
        if (search_path.length === 0) {
            search_path = "search.xml";
        }
        const path = "/" + search_path;
        searchFunc(path, 'local-search-input', 'local-search-result');
    }
});
</script><script>document.addEventListener('DOMContentLoaded', function() {
    const languageToggle = document.querySelector('.language-toggle');
    const languageDropdown = document.querySelector('.language-dropdown');

    if (languageToggle && languageDropdown) {
    languageToggle.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        languageDropdown.classList.toggle('hidden');
    });

    languageDropdown.addEventListener('click', function(e) {
        e.stopPropagation();
    });

    document.addEventListener('click', function() {
        languageDropdown.classList.add('hidden');
    });

    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
        languageDropdown.classList.add('hidden');
        }
    });
    }
});
</script><script>document.addEventListener('DOMContentLoaded', function() {
    const moreToggle = document.querySelector('.more-toggle');
    const moreDropdown = document.querySelector('.more-dropdown');

    if (moreToggle && moreDropdown) {
        moreToggle.addEventListener('click', function(e) {
            e.preventDefault();
            e.stopPropagation();
            moreDropdown.classList.toggle('hidden');
        });

        moreDropdown.addEventListener('click', function(e) {
            e.stopPropagation();
        });

        document.addEventListener('click', function() {
            moreDropdown.classList.add('hidden');
        });

        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                moreDropdown.classList.add('hidden');
            }
        });
    }
});
</script><script>const hamburger = document.querySelector('.hamburger-menu');
const mobileMenu = document.querySelector('.mobile-menu-container');
const menuClose = document.querySelector('.menu-close');

if (hamburger && mobileMenu) {
    const closeDropdowns = () => {
        const openDropdowns = mobileMenu.querySelectorAll('.dropdown-menu.show');
        const rotatedToggles = mobileMenu.querySelectorAll('.dropdown-toggle.rotated');
        openDropdowns.forEach(dropdown => dropdown.classList.remove('show'));
        rotatedToggles.forEach(toggle => toggle.classList.remove('rotated'));
    };

    const closeMenu = () => {
        mobileMenu.classList.remove('show');
        hamburger.setAttribute('aria-expanded', false);
        closeDropdowns();
    };

    hamburger.addEventListener('click', function(e) {
        e.preventDefault();
        e.stopPropagation();
        mobileMenu.classList.toggle('show');
        const isExpanded = mobileMenu.classList.contains('show');
        hamburger.setAttribute('aria-expanded', isExpanded);
    });

    if (menuClose) {
        menuClose.addEventListener('click', closeMenu);
    }

    const dropdownItems = mobileMenu.querySelectorAll('.has-dropdown');
    dropdownItems.forEach(item => {
        const link = item.querySelector('.nav-link');
        const dropdownMenu = item.querySelector('.dropdown-menu');
        const dropdownToggle = item.querySelector('.dropdown-toggle');

        if (link && dropdownMenu) {
            link.addEventListener('click', function(e) {
                if (e.target !== link) return;
                e.preventDefault();
                dropdownMenu.classList.toggle('show');
                dropdownToggle?.classList.toggle('rotated');
            });
        }
    });

    mobileMenu.addEventListener('click', e => e.stopPropagation());

    document.addEventListener('click', closeMenu);

    document.addEventListener('keydown', e => {
        if (e.key === 'Escape' && mobileMenu.classList.contains('show')) {
            closeMenu();
        }
    });
}</script><div class="hidden" id="search-popup"><div id="search-panel"><input type="text" id="local-search-input" placeholder="搜索..."><div id="local-search-result"></div></div></div></body></html>